/*! migme - v0.1.0 - 2015-03-24 */
"use strict";var _createClass=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},API_BASE="https://api.mig.me",OAUTH_BASE="https://oauth.mig.me/oauth",Migme=function(){function a(){var b=void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,a),this.client_id=b.client_id||"309f818242abae8fdd1b",this.redirect_uri=b.redirect_uri||"http://localhost:8080/oauth/callback"}return _createClass(a,{getLoginStatus:{value:function(){return fetch(OAUTH_BASE+"")}},setAccessToken:{value:function(a){this.access_token=a}},login:{value:function(){var a=void 0===arguments[0]?[]:arguments[0];"undefined"!=typeof window&&window.open(OAUTH_BASE+"/login?client_id="+this.client_id+"&redirect_uri="+this.redirect_uri+"&scope="+a.toString()+"&response_type=code")}},logout:{value:function(){return fetch(OAUTH_BASE+"")}},api:{value:function(a){var b=void 0===arguments[1]?{}:arguments[1];return 0!==a.indexOf("/")&&(a="/"+a),"undefined"!=typeof this.access_token?(b["Content-Type"]="application/json",b.Authorization="Bearer "+this.access_token,console.log(API_BASE+a,b),fetch(API_BASE+a,b)):void console.error("You need to get an access_token before calling api()")}}}),a}();module.exports=Migme;